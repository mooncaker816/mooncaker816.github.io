<!DOCTYPE html>
<html lang="zh">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="theme" content="hugo-academic">
  <meta name="generator" content="Hugo 0.39" />
  <meta name="author" content="Mingle Gu">

  
  
  
  
    
      
    
  
  <meta name="description" content="Ex 4.8

Modify charcount to count letters, digits, and so on in their Unicode categories, using functions like unicode.IsLetter.

">

  
  <link rel="alternate" hreflang="zh" href="https://mooncaker816.github.io/2017/12/24/the-go-programming-language-ex5/">

  


  

  
  
  <meta name="theme-color" content="#3f51b5">
  
  
  
  
    
  
  
    
    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai-sublime.min.css">
    
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha512-6MXa8B6uaO18Hid6blRMetEIoPqHf7Ux1tnyIQdpt9qI5OACx7C+O3IVTr98vwGnlcg0LOLa02i9Y1HpVhlfiw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.1/css/academicons.min.css" integrity="sha512-NThgw3XKQ1absAahW6to7Ey42uycrVvfNfyjqcFNgCmOCQ5AR4AO0SiXrN+8ZtYeappp56lk1WtvjVmEa+VR6A==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucnnEAjpAB+/Sw==" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">
  
  
  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700%7cRoboto:400,400italic,700%7cRoboto&#43;Mono">
  
  <link rel="stylesheet" href="/styles.css">
  
  <link rel="stylesheet" href="/css/custom.css">
  
  <link rel="stylesheet" href="/css/asciinema-player.css">
  

  
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-118085755-1', 'auto');
      
      ga('require', 'eventTracker');
      ga('require', 'outboundLinkTracker');
      ga('require', 'urlChangeTracker');
      ga('send', 'pageview');
    </script>
    <script async src="//www.google-analytics.com/analytics.js"></script>
    
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/autotrack/2.4.1/autotrack.js" integrity="sha512-HUmooslVKj4m6OBu0OgzjXXr+QuFYy/k7eLI5jdeEy/F4RSgMn6XRWRGkFi5IFaFgy7uFTkegp3Z0XnJf3Jq+g==" crossorigin="anonymous"></script>
    
  

  
  <link rel="alternate" href="https://mooncaker816.github.io/index.xml" type="application/rss+xml" title="Mooncaker816">
  <link rel="feed" href="https://mooncaker816.github.io/index.xml" type="application/rss+xml" title="Mooncaker816">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="https://mooncaker816.github.io/2017/12/24/the-go-programming-language-ex5/">

  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Mooncaker816">
  <meta property="og:url" content="https://mooncaker816.github.io/2017/12/24/the-go-programming-language-ex5/">
  <meta property="og:title" content="The Go Programming Language Ex（5） | Mooncaker816">
  <meta property="og:description" content="Ex 4.8

Modify charcount to count letters, digits, and so on in their Unicode categories, using functions like unicode.IsLetter.

">
  <meta property="og:locale" content="zh">
  
  <meta property="article:published_time" content="2017-12-24T19:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2017-12-24T19:00:00&#43;00:00">
  

  

  <script src="//load.sumome.com/" data-sumo-site-id="179bbb944edcce8627cb15d8b33fadaf440e3b5043efd79feb50582c0be37fb2" async="async"></script>



  <title>The Go Programming Language Ex（5） | Mooncaker816</title>

</head>
<body id="top" data-spy="scroll" data-target="#toc" data-offset="71" >

<nav class="navbar navbar-default navbar-fixed-top" id="navbar-main">
  <div class="container">

    
    <div class="navbar-header">
      
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
              data-target=".navbar-collapse" aria-expanded="false">
        <span class="sr-only">切换导航</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
      <a class="navbar-brand" href="/">Mooncaker816</a>
    </div>

    
    <div class="collapse navbar-collapse">

      
      
      <ul class="nav navbar-nav navbar-right">
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#about">
            
            <span>主页</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#tags">
            
            <span>分类</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#posts">
            
            <span>文章</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/#contact">
            
            <span>联系</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/arch/">
            
            <span>归档</span>
            
          </a>
        </li>

        
        

        
        
        
        
        
          
        

        <li class="nav-item">
          <a href="/example/">
            
            <span>示例</span>
            
          </a>
        </li>

        
        
      

      
      </ul>

    </div>
  </div>
</nav>








    
        
        
            
        
        
                
                        
        
        
    
        
        
            
        
        
                
                        
        
        
    
        
        
            
        
        
                
                        
        
        
    
        
        
            
        
        
                
                        
        
        
    


<div class="container body-content tocpost">
  <div class="row">

      <nav id="tocpost-navbar" class="tocpost-nav visible-md visible-lg affix">

          <ul id="tocpost-main-nav">

          </ul>
      </nav>
      <div class="col-md-2">
          <nav id="small-nav" class="tocpost-nav hidden-md hidden-lg">
            
          </nav>
      </div>

      <div class="col-sm-9 col-md-8 body">
          <article class="article" itemscope itemtype="http://schema.org/Article">

            


            <div class="article-container">
              <h1 itemprop="name">The Go Programming Language Ex（5）</h1>

              

<div class="article-metadata">

  <span class="article-date">
    
    <time datetime="2017-12-24 19:00:00 &#43;0000 UTC" itemprop="datePublished dateModified">
      Dec 24, 2017
    </time>
  </span>
  <span itemscope itemprop="author publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Mingle Gu">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    5 分钟阅读时间
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="https://mooncaker816.github.io/2017/12/24/the-go-programming-language-ex5/#disqus_thread"></a>
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fa fa-folder"></i>
    
    <a href="https://mooncaker816.github.io/categories/golang/">Golang</a
    >
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=The%20Go%20Programming%20Language%20Ex%ef%bc%885%ef%bc%89&amp;url=https%3a%2f%2fmooncaker816.github.io%2f2017%2f12%2f24%2fthe-go-programming-language-ex5%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fmooncaker816.github.io%2f2017%2f12%2f24%2fthe-go-programming-language-ex5%2f"
         target="_blank" rel="noopener">
        <i class="fa fa-facebook"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fmooncaker816.github.io%2f2017%2f12%2f24%2fthe-go-programming-language-ex5%2f&amp;title=The%20Go%20Programming%20Language%20Ex%ef%bc%885%ef%bc%89"
         target="_blank" rel="noopener">
        <i class="fa fa-linkedin"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=https%3a%2f%2fmooncaker816.github.io%2f2017%2f12%2f24%2fthe-go-programming-language-ex5%2f&amp;title=The%20Go%20Programming%20Language%20Ex%ef%bc%885%ef%bc%89"
         target="_blank" rel="noopener">
        <i class="fa fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=The%20Go%20Programming%20Language%20Ex%ef%bc%885%ef%bc%89&amp;body=https%3a%2f%2fmooncaker816.github.io%2f2017%2f12%2f24%2fthe-go-programming-language-ex5%2f">
        <i class="fa fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>



              <div class="article-style" itemprop="articleBody">
                <h3 id=c276cff6cacdbbd0f83edd3778ab0197>Ex 4.8</h3>

<p>Modify charcount to count letters, digits, and so on in their Unicode categories, using functions like unicode.IsLetter.</p>

<p></p>

<pre><code class="language-go">package main

import (
	"bufio"
	"fmt"
	"io"
	"os"
	"unicode"
)

func main() {
	counts := make(map[string]int)                       // counts of Unicode characters
	invalid, letter, digit, mark, other := 0, 0, 0, 0, 0 // count of invalid UTF-8 characters

	in := bufio.NewReader(os.Stdin)
	for {
		r, n, err := in.ReadRune() // returns rune, nbytes, error
		if err == io.EOF {
			break
		}
		if err != nil {
			fmt.Fprintf(os.Stderr, "charcount: %v\n", err)
			os.Exit(1)
		}
		if r == unicode.ReplacementChar && n == 1 {
			invalid++
			continue
		} else if unicode.IsLetter(r) {
			letter++
		} else if unicode.IsDigit(r) {
			digit++
		} else if unicode.IsMark(r) {
			mark++
		} else {
			other++
			fmt.Println(r)
		}
	}
	counts["invalid"] = invalid
	counts["letter"] = letter
	counts["digit"] = digit
	counts["mark"] = mark
	counts["other"] = other

	for c, n := range counts {
		fmt.Printf("%s\t:%d\n", c, n)
	}
}
</code></pre>

<pre><code class="language-bash">./ex4.8
sdfwwer 1434jipi三是奇偶i问
32
10
invalid	:0
letter	:17
digit	:4
mark	:0
other	:2
</code></pre>

<ul>
<li><strong>显然汉字也被认为是letter</strong></li>
<li><strong>终端模拟EOF 为 ctrl + d</strong></li>
</ul>

<h3 id=072eddac215acd9db16dd0e96bba7445>Ex 4.9</h3>

<p>Write a program wordfreq to report the frequency of each word in an input text ﬁle. Call input.Split(bufio.ScanWords) before the ﬁrst call to Scan to break the input into words instead of lines.</p>

<pre><code class="language-go">package main

import (
	"bufio"
	"fmt"
	"strings"
)

func main() {
	words := make(map[string]int)
	input := "foo  bar   baz foo 我们 foo 我们"
	scanner := bufio.NewScanner(strings.NewReader(input))
	scanner.Split(bufio.ScanWords)
	for scanner.Scan() {
		//fmt.Println(scanner.Text())
		words[scanner.Text()]++
	}
	for k, v := range words {
		fmt.Printf("%s : %d\n", k, v)
	}
}
</code></pre>

<pre><code class="language-bash">$ go run wordfreq.go
baz : 1
我们 : 2
foo : 3
bar : 1
</code></pre>

<h3 id=465ab1ce30e215bcd8196368d9d66f5d>Ex4.13</h3>

<p>The JSON-based web service of the Open Movie Database lets you s <a href="https://omdbapi.com/" target="_blank">https://omdbapi.com/</a> for a movie by name and download its poster image. Write a tool poster that downloads the poster image for the movie named on the command line.</p>

<pre><code class="language-go">package main

import (
	"encoding/json"
	"fmt"
	"io"
	"net/http"
	"os"
)

const OmdbAPI = "http://www.omdbapi.com/?i=tt3896198&apikey=7b94e6bd&t="

type Movie struct {
	Title    string
	Year     string
	Poster   string
	Response string
	Errormsg string `json:"Error,omitempty"`
}

func main() {
	for i := 1; i < len(os.Args); i++ {
		url := OmdbAPI + os.Args[i]
		resp, err := http.Get(url)
		if err != nil {
			fmt.Println("http get error ", err)
			return
		}
		defer resp.Body.Close()
		var result Movie
		err = json.NewDecoder(resp.Body).Decode(&result)
		if err != nil {
			fmt.Println("decode failed")
			return
		}
		fmt.Printf("%#v\n", result)
		fmt.Printf("%v\n", result)
		if result.Response == "false" {
			fmt.Println(result.Errormsg)
		} else {
			fmt.Println("starting download poster")
			result.Poster = "https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike92%2C5%2C5%2C92%2C30/sign=5a60b1a4cf8065386fe7ac41f6b4ca21/fd039245d688d43f4ee7a518781ed21b0ff43b89.jpg"
			posterres, err := http.Get(result.Poster)
			if err != nil {
				fmt.Println("get poster url error, download failed", err)
				return
			} else {
				filename := result.Title + ".jpg"
				f, err := os.Create(filename)
				if err != nil {
					fmt.Println("create file error")
					return
				}
				io.Copy(f, posterres.Body)
			}
		}
	}
}
</code></pre>

<pre><code class="language-bash">$ ./ex4.13 triangle triangleeeee
main.Movie{Title:"Triangle", Year:"2009", Poster:"https://images-na.ssl-images-amazon.com/images/M/MV5BY2VlODI5ZmMtZDExYS00OWI4LWJiMWItZWZkZWRkNzlmZWI2XkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg", Response:"True", Errormsg:""}
{Triangle 2009 https://images-na.ssl-images-amazon.com/images/M/MV5BY2VlODI5ZmMtZDExYS00OWI4LWJiMWItZWZkZWRkNzlmZWI2XkEyXkFqcGdeQXVyMTQxNzMzNDI@._V1_SX300.jpg True }
starting download poster
download finished
main.Movie{Title:"", Year:"", Poster:"", Response:"False", Errormsg:"Movie not found!"}
{   False Movie not found!}
Movie not found!
</code></pre>

<p><img src="http://oumnldfwl.bkt.clouddn.com/ex4.13.png" alt="Triangle.jpg" /></p>

<h3 id=b597f8e361db83e0b85d5c3dae61f0cd>Ex 4.14</h3>

<p>Create a web server that queries GitHub once and then allows navigation of the list of bug reports, milestones, and users.</p>

<pre><code class="language-go">package main

import (
	"encoding/json"
	"fmt"
	temp2 "html/template"
	"log"
	"net/http"
	"net/url"
	"os"
	"strings"
	temp1 "text/template"
	"time"
)

const IssuesURL = "https://api.github.com/search/issues"

//!+template
const templ1 = `{{.TotalCount}} issues:
{{range .Items}}----------------------------------------
Number: {{.Number}}
User:   {{.User.Login}}
Title:  {{.Title | printf "%.64s"}}
Age:    {{.CreatedAt | daysAgo}} days
Milestone: {{.Milestone.Title}}
{{end}}`
const templ2 = `
<h1>{{.TotalCount}} issues</h1>
<table>
<tr style='text-align: left'>
  <th>#</th>
  <th>State</th>
  <th>User</th>
  <th>Title</th>
  <th>Milestone</th>
</tr>
{{range .Items}}
<tr>
  <td><a href='{{.HTMLURL}}'>{{.Number}}</a></td>
  <td>{{.State}}</td>
  <td><a href='{{.User.HTMLURL}}'>{{.User.Login}}</a></td>
  <td><a href='{{.HTMLURL}}'>{{.Title}}</a></td>
  <td><a href='{{.Milestone.HTMLURL}}'>{{.Milestone.Title}}</a></td>
</tr>
{{end}}
</table>
`

//!-template

type IssuesSearchResult struct {
	TotalCount int `json:"total_count"`
	Items      []*Issue
}

type Issue struct {
	Number    int
	HTMLURL   string `json:"html_url"`
	Title     string
	State     string
	User      *User
	CreatedAt time.Time `json:"created_at"`
	Body      string    // in Markdown format
	Milestone *Milestone
}

type User struct {
	Login   string
	HTMLURL string `json:"html_url"`
}

type Milestone struct {
	Title   string
	HTMLURL string `json:"html_url"`
}

var report1 = temp1.Must(temp1.New("issuelist1").
	Funcs(temp1.FuncMap{"daysAgo": daysAgo}).
	Parse(templ1))
var report2 = temp2.Must(temp2.New("issuelist2").
	Funcs(temp2.FuncMap{"daysAgo": daysAgo}).
	Parse(templ2))

func main() {
	result, err := SearchIssues(os.Args[1:])
	if err != nil {
		log.Fatal(err)
	}
	f1, err := os.Create("report.txt")
	if err := report1.Execute(f1, result); err != nil {
		log.Fatal(err)
	}
	f2, err := os.Create("report.html")
	if err := report2.Execute(f2, result); err != nil {
		log.Fatal(err)
	}
}

func daysAgo(t time.Time) int {
	return int(time.Since(t).Hours() / 24)
}

// SearchIssues queries the GitHub issue tracker.
func SearchIssues(terms []string) (*IssuesSearchResult, error) {
	q := url.QueryEscape(strings.Join(terms, " "))
	resp, err := http.Get(IssuesURL + "?q=" + q)
	if err != nil {
		return nil, err
	}
	// We must close resp.Body on all execution paths.
	// (Chapter 5 presents 'defer', which makes this simpler.)
	if resp.StatusCode != http.StatusOK {
		resp.Body.Close()
		return nil, fmt.Errorf("search query failed: %s", resp.Status)
	}
	var result IssuesSearchResult
	if err := json.NewDecoder(resp.Body).Decode(&result); err != nil {
		resp.Body.Close()
		return nil, err
	}
	resp.Body.Close()
	return &result, nil
}
</code></pre>

<pre><code class="language-text">//report.txt
41 issues:
----------------------------------------
Number: 23188
User:   ianlancetaylor
Title:  cmd/compile: incorrect order of evaluation according to spec
Age:    7 days
Milestone: Go1.11
----------------------------------------
Number: 23183
User:   terinjokes
Title:  net/http: muxer no longer redirects host patterns in go1.10
Age:    7 days
Milestone: Go1.10
----------------------------------------
Number: 23181
User:   hirochachacha
Title:  cmd/buildid: rewrite algorithm is broken
Age:    7 days
Milestone: Go1.10
----------------------------------------
Number: 23180
User:   aarzilli
Title:  cmd/go: go test -c does not apply specified gcflags to all packa
Age:    7 days
Milestone: Go1.10
----------------------------------------
Number: 23166
User:   mvdan
Title:  x/tools/go/ssa/interp: tests consistently failing on darwin
Age:    8 days
Milestone: Go1.10
----------------------------------------
Number: 23146
User:   bradfitz
Title:  cmd/vet: stderr spam during testing
Age:    12 days
Milestone: Go1.10
----------------------------------------
Number: 23122
User:   rsc
Title:  all: remove support for OS X 10.8 and 10.9
Age:    13 days
Milestone: Go1.11
----------------------------------------
Number: 23098
User:   mikioh
Title:  runtime: loop over allp causes a nil pointer dereference crash
Age:    15 days
Milestone: Go1.10
----------------------------------------
Number: 23037
User:   zolotov
Title:  cmd/go: add JSON output for building package failures while runn
Age:    19 days
Milestone: Go1.10
----------------------------------------
Number: 23036
User:   zolotov
Title:  cmd/test2json: filtering out testing service messages or mark th
Age:    19 days
Milestone: Go1.10
----------------------------------------
Number: 23011
User:   bradfitz
Title:  build: announce end of support for old macOS releases
Age:    21 days
Milestone: Go1.11
----------------------------------------
Number: 23010
User:   rsc
Title:  net/http: ResponseWriter panics in WriteHeaders that were former
Age:    21 days
Milestone: Go1.10
----------------------------------------
Number: 23009
User:   rsc
Title:  net/http/httputil: ReverseProxy change conflicts with future Rev
Age:    21 days
Milestone: Go1.10
----------------------------------------
Number: 22984
User:   rsc
Title:  cmd/go: test -json not cached
Age:    22 days
Milestone: Go1.10
----------------------------------------
Number: 22924
User:   chipaca
Title:  syscall: on linux 386 doesn't support syscalls that don't fail
Age:    27 days
Milestone: Go1.11
----------------------------------------
Number: 22781
User:   pciet
Title:  runtime: fatal error: sweep increased allocation count, go1.9.x
Age:    39 days
Milestone: Go1.9.3
----------------------------------------
Number: 22637
User:   ianlancetaylor
Title:  crypto: examine and probably remove OpenSSL derived code
Age:    48 days
Milestone: Go1.10
----------------------------------------
Number: 22487
User:   tklauser
Title:  lib/time: update tzdata before 1.10 release
Age:    58 days
Milestone: Go1.10
----------------------------------------
Number: 22475
User:   rsc
Title:  cmd/go: include GOROOT in linkActionID hash
Age:    59 days
Milestone: Go1.10
----------------------------------------
Number: 22472
User:   rsc
Title:  cmd/go: implement gccgo support for content-based staleness
Age:    60 days
Milestone: Go1.10
----------------------------------------
Number: 22444
User:   griesemer
Title:  cmd/compile: missing wrapper function for call of literal method
Age:    62 days
Milestone: Go1.11
----------------------------------------
Number: 22429
User:   TheTincho
Title:  cmd/compile: invalid instruction error for FMOVD when compiling 
Age:    63 days
Milestone: Go1.9.3
----------------------------------------
Number: 22349
User:   alexbrainman
Title:  net: ipStackCapabilities.probe creates sockets that can escape i
Age:    68 days
Milestone: Go1.10
----------------------------------------
Number: 22224
User:   siebenmann
Title:  cmd/go: build failure on amd64 Linux with an error in TestTwoGop
Age:    76 days
Milestone: Go1.10
----------------------------------------
Number: 22204
User:   tmm1
Title:  runtime: sigpanic during GC on android/arm64
Age:    77 days
Milestone: Go1.10
----------------------------------------
Number: 22155
User:   rsc
Title:  cmd/go: GOROOT override using linker -X flag is probably not rig
Age:    82 days
Milestone: Go1.10
----------------------------------------
Number: 21431
User:   josharian
Title:  runtime: stack split at a bad time on mipsle
Age:    135 days
Milestone: Go1.10
----------------------------------------
Number: 21282
User:   dsnet
Title:  cmd/compile: incorrect type assertions on conflicting package na
Age:    146 days
Milestone: Go1.11
----------------------------------------
Number: 21221
User:   vibhavp
Title:  cmd/compile: internal compiler error: constant type mismatch whe
Age:    150 days
Milestone: Go1.11
----------------------------------------
Number: 20790
User:   mikioh
Title:  net: DefaultResolver.Lookup{Host,IPAddr} and LookupHost fail to 
Age:    185 days
Milestone: Go1.11
</code></pre>

<pre><code class="language-html">//report.html

<h1>41 issues</h1>
<table>
<tr style='text-align: left'>
  <th>#</th>
  <th>State</th>
  <th>User</th>
  <th>Title</th>
  <th>Milestone</th>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23188'>23188</a></td>
  <td>open</td>
  <td><a href='https://github.com/ianlancetaylor'>ianlancetaylor</a></td>
  <td><a href='https://github.com/golang/go/issues/23188'>cmd/compile: incorrect order of evaluation according to spec</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23183'>23183</a></td>
  <td>open</td>
  <td><a href='https://github.com/terinjokes'>terinjokes</a></td>
  <td><a href='https://github.com/golang/go/issues/23183'>net/http: muxer no longer redirects host patterns in go1.10</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23181'>23181</a></td>
  <td>open</td>
  <td><a href='https://github.com/hirochachacha'>hirochachacha</a></td>
  <td><a href='https://github.com/golang/go/issues/23181'>cmd/buildid: rewrite algorithm is broken</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23180'>23180</a></td>
  <td>open</td>
  <td><a href='https://github.com/aarzilli'>aarzilli</a></td>
  <td><a href='https://github.com/golang/go/issues/23180'>cmd/go: go test -c does not apply specified gcflags to all packages</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23166'>23166</a></td>
  <td>open</td>
  <td><a href='https://github.com/mvdan'>mvdan</a></td>
  <td><a href='https://github.com/golang/go/issues/23166'>x/tools/go/ssa/interp: tests consistently failing on darwin</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23146'>23146</a></td>
  <td>open</td>
  <td><a href='https://github.com/bradfitz'>bradfitz</a></td>
  <td><a href='https://github.com/golang/go/issues/23146'>cmd/vet: stderr spam during testing</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23122'>23122</a></td>
  <td>open</td>
  <td><a href='https://github.com/rsc'>rsc</a></td>
  <td><a href='https://github.com/golang/go/issues/23122'>all: remove support for OS X 10.8 and 10.9</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23098'>23098</a></td>
  <td>open</td>
  <td><a href='https://github.com/mikioh'>mikioh</a></td>
  <td><a href='https://github.com/golang/go/issues/23098'>runtime: loop over allp causes a nil pointer dereference crash</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23037'>23037</a></td>
  <td>open</td>
  <td><a href='https://github.com/zolotov'>zolotov</a></td>
  <td><a href='https://github.com/golang/go/issues/23037'>cmd/go: add JSON output for building package failures while running go test on directory with several packages</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23036'>23036</a></td>
  <td>open</td>
  <td><a href='https://github.com/zolotov'>zolotov</a></td>
  <td><a href='https://github.com/golang/go/issues/23036'>cmd/test2json: filtering out testing service messages or mark them in a special way</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23011'>23011</a></td>
  <td>open</td>
  <td><a href='https://github.com/bradfitz'>bradfitz</a></td>
  <td><a href='https://github.com/golang/go/issues/23011'>build: announce end of support for old macOS releases</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23010'>23010</a></td>
  <td>open</td>
  <td><a href='https://github.com/rsc'>rsc</a></td>
  <td><a href='https://github.com/golang/go/issues/23010'>net/http: ResponseWriter panics in WriteHeaders that were formerly ignored</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/23009'>23009</a></td>
  <td>open</td>
  <td><a href='https://github.com/rsc'>rsc</a></td>
  <td><a href='https://github.com/golang/go/issues/23009'>net/http/httputil: ReverseProxy change conflicts with future ReverseProxy plans</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22984'>22984</a></td>
  <td>open</td>
  <td><a href='https://github.com/rsc'>rsc</a></td>
  <td><a href='https://github.com/golang/go/issues/22984'>cmd/go: test -json not cached</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22924'>22924</a></td>
  <td>open</td>
  <td><a href='https://github.com/chipaca'>chipaca</a></td>
  <td><a href='https://github.com/golang/go/issues/22924'>syscall: on linux 386 doesn&#39;t support syscalls that don&#39;t fail</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22781'>22781</a></td>
  <td>open</td>
  <td><a href='https://github.com/pciet'>pciet</a></td>
  <td><a href='https://github.com/golang/go/issues/22781'>runtime: fatal error: sweep increased allocation count, go1.9.x</a></td>
  <td><a href='https://github.com/golang/go/milestone/63'>Go1.9.3</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22637'>22637</a></td>
  <td>open</td>
  <td><a href='https://github.com/ianlancetaylor'>ianlancetaylor</a></td>
  <td><a href='https://github.com/golang/go/issues/22637'>crypto: examine and probably remove OpenSSL derived code</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22487'>22487</a></td>
  <td>open</td>
  <td><a href='https://github.com/tklauser'>tklauser</a></td>
  <td><a href='https://github.com/golang/go/issues/22487'>lib/time: update tzdata before 1.10 release</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22475'>22475</a></td>
  <td>open</td>
  <td><a href='https://github.com/rsc'>rsc</a></td>
  <td><a href='https://github.com/golang/go/issues/22475'>cmd/go: include GOROOT in linkActionID hash</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22472'>22472</a></td>
  <td>open</td>
  <td><a href='https://github.com/rsc'>rsc</a></td>
  <td><a href='https://github.com/golang/go/issues/22472'>cmd/go: implement gccgo support for content-based staleness</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22444'>22444</a></td>
  <td>open</td>
  <td><a href='https://github.com/griesemer'>griesemer</a></td>
  <td><a href='https://github.com/golang/go/issues/22444'>cmd/compile: missing wrapper function for call of literal method expression</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22429'>22429</a></td>
  <td>open</td>
  <td><a href='https://github.com/TheTincho'>TheTincho</a></td>
  <td><a href='https://github.com/golang/go/issues/22429'>cmd/compile: invalid instruction error for FMOVD when compiling for 387</a></td>
  <td><a href='https://github.com/golang/go/milestone/63'>Go1.9.3</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22349'>22349</a></td>
  <td>open</td>
  <td><a href='https://github.com/alexbrainman'>alexbrainman</a></td>
  <td><a href='https://github.com/golang/go/issues/22349'>net: ipStackCapabilities.probe creates sockets that can escape into child process</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22224'>22224</a></td>
  <td>open</td>
  <td><a href='https://github.com/siebenmann'>siebenmann</a></td>
  <td><a href='https://github.com/golang/go/issues/22224'>cmd/go: build failure on amd64 Linux with an error in TestTwoGopathShlibsGccgo from CL 69831  onward</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22204'>22204</a></td>
  <td>open</td>
  <td><a href='https://github.com/tmm1'>tmm1</a></td>
  <td><a href='https://github.com/golang/go/issues/22204'>runtime: sigpanic during GC on android/arm64</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/22155'>22155</a></td>
  <td>open</td>
  <td><a href='https://github.com/rsc'>rsc</a></td>
  <td><a href='https://github.com/golang/go/issues/22155'>cmd/go: GOROOT override using linker -X flag is probably not right</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/21431'>21431</a></td>
  <td>open</td>
  <td><a href='https://github.com/josharian'>josharian</a></td>
  <td><a href='https://github.com/golang/go/issues/21431'>runtime: stack split at a bad time on mipsle</a></td>
  <td><a href='https://github.com/golang/go/milestone/56'>Go1.10</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/21282'>21282</a></td>
  <td>open</td>
  <td><a href='https://github.com/dsnet'>dsnet</a></td>
  <td><a href='https://github.com/golang/go/issues/21282'>cmd/compile: incorrect type assertions on conflicting package names</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/21221'>21221</a></td>
  <td>open</td>
  <td><a href='https://github.com/vibhavp'>vibhavp</a></td>
  <td><a href='https://github.com/golang/go/issues/21221'>cmd/compile: internal compiler error: constant type mismatch when comparing two unsafe.Pointer rvalues</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

<tr>
  <td><a href='https://github.com/golang/go/issues/20790'>20790</a></td>
  <td>open</td>
  <td><a href='https://github.com/mikioh'>mikioh</a></td>
  <td><a href='https://github.com/golang/go/issues/20790'>net: DefaultResolver.Lookup{Host,IPAddr} and LookupHost fail to parse a literal IPv6 address w/ zone</a></td>
  <td><a href='https://github.com/golang/go/milestone/62'>Go1.11</a></td>
</tr>

</table>
</code></pre>

<p><img src="http://oumnldfwl.bkt.clouddn.com/ex4.14.png" alt="ex4.14 report.html" /></p>
              </div>

              


<div class="article-tags">
  
  <a class="btn btn-primary btn-outline" href="https://mooncaker816.github.io/tags/the-go-programming-language-ex/">The Go Programming Language Ex</a>
  
  <a class="btn btn-primary btn-outline" href="https://mooncaker816.github.io/tags/go-map/">Go map</a>
  
  <a class="btn btn-primary btn-outline" href="https://mooncaker816.github.io/tags/go-template/">Go template</a>
  
  <a class="btn btn-primary btn-outline" href="https://mooncaker816.github.io/tags/go-json/">Go JSON</a>
  
</div>




              
              
              <div class="article-widget">
                <div class="hr-light"></div>
                <h3>相关</h3>
                <ul>
                  
                  <li><a href="/2017/12/23/the-go-programming-language-ex4/">The Go Programming Language Ex（4）</a></li>
                  
                  <li><a href="/2017/12/22/the-go-programming-language-ex3/">The Go Programming Language Ex（3）</a></li>
                  
                  <li><a href="/2017/12/21/the-go-programming-language-ex2/">The Go Programming Language Ex（2）</a></li>
                  
                  <li><a href="/2017/12/19/the-go-programming-language-ex1/">The Go Programming Language Ex（1）</a></li>
                  
                  <li><a href="/2017/12/12/go-in-action-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%E4%B8%89/">Go In Action 读书笔记（三）</a></li>
                  
                </ul>
              </div>
              

              
              <div class="article-widget">
                <div class="post-nav">
  <div class="row">
      
      <div class="col-sm-9 col-md-6">下一页
        <div class="post-nav-item">
        <a href="https://mooncaker816.github.io/2017/12/28/the-go-programming-language-ex6/" rel="next">The Go Programming Language Ex（6）</a>
        </div>
      </div>
      
      
      <div class="col-sm-9 col-md-6">上一页
        <div class="post-nav-item">
          <a href="https://mooncaker816.github.io/2017/12/23/the-go-programming-language-ex4/" rel="prev">The Go Programming Language Ex（4）</a>
        </div>
      </div>
      
  </div>
</div>

              </div>
              

              <div class="body-footer">
                  最近更新于 Dec 24, 2017
              </div>
              
              
<section id="comments">
  <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "mooncaker816" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



            </div>

          </article>
      </div>


      <div class="hidden-xs col-sm-3 col-md-2">
          <nav id="tocpost-subnavbar" class="affix">
            


<nav id="toc" data-toggle="toc">
  <h4 class="text-muted">页面内容</h4>
  <ul class="nav">
    
      
      

      
      
      
      

      

      <li>
        <a href="#c276cff6cacdbbd0f83edd3778ab0197">Ex 4.8</a>

      
    
      
      

      
      
      
      

      
        
        

        

        

        
          </li>
        

        <li>
          <a href="#072eddac215acd9db16dd0e96bba7445">Ex 4.9</a>

        

      
    
      
      

      
      
      
      

      
        
        

        

        

        
          </li>
        

        <li>
          <a href="#465ab1ce30e215bcd8196368d9d66f5d">Ex4.13</a>

        

      
    
      
      

      
      
      
      

      
        
        

        

        

        
          </li>
        

        <li>
          <a href="#b597f8e361db83e0b85d5c3dae61f0cd">Ex 4.14</a>

        
          
        

      
    

    
    
    

  </ul>
</nav>


            <ul class="nav article-toc-top">
              <li><a href="#">回到顶部</a></li>
            </ul>

            
          </nav>
      </div>

  </div>
</div>

<footer class="site-footer">
  <div class="container">
    <p class="powered-by">

      &copy; 2018-Present &middot; 

      Powered by the
      <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
      <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.
      
      <span class="pull-right" aria-hidden="true">
        <a href="#" id="back_to_top">
          <span class="button_icon">
            <i class="fa fa-chevron-up fa-2x"></i>
          </span>
        </a>
      </span>

    </p>
    
  </div>
</footer>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn-large" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">引用</h4>
      </div>
      <div>
        <pre><code class="modal-body tex"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-primary btn-outline js-copy-cite" href="#" target="_blank">
          <i class="fa fa-copy"></i> 复制
        </a>
        <a class="btn btn-primary btn-outline js-download-cite" href="#" target="_blank">
          <i class="fa fa-download"></i> 下载
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    
    <script id="dsq-count-scr" src="/js/count.js" async></script>
    
    

    

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha512-iztkobsvnjKfAtTNdHkGVjAYTrrtlC7mGp/54c40wowO7LhURYl3gVzzcEqGl/qKXQltJ2HwMrdLcNUdo+N/RQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>
    
    
    <script src="/js/hugo-academic.js"></script>
    
    <script src="/js/wordart.min.js"></script>
    
    <script src="/js/asciinema-player.js"></script>
    

    
    
      
      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
      

      
      <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
      

      

      <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
    </script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" integrity="sha512-tOav5w1OjvsSJzePRtt2uQPFwBoHt1VZcUq8l8nm5284LEKE9FSJBQryzMBzHxY5P0zRdNqEcpLIRVYFNgu1jw==" crossorigin="anonymous"></script>
    
    

  </body>
</html>

